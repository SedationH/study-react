{"version":3,"sources":["check.svg","List.jsx","Search.jsx","App.jsx","index.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","d","_ref","svgRef","title","props","id","x","y","viewBox","style","enableBackground","xmlSpace","ref","ForwardRef","forwardRef","React","memo","list","loading","handleButtonClick","console","log","map","item","objectID","className","width","href","url","author","num_comments","points","type","onClick","height","Search","handleInputChange","value","children","handleSearchClick","inputRef","useRef","useEffect","current","focus","onSubmit","htmlFor","onChange","API_ENDPOINT","storiesReducer","state","action","isLoading","isError","data","payload","filter","story","Error","App","isFirst","isMounted","useState","localStorage","getItem","searchValue","setSearchValue","setItem","useCustomHook","useReducer","stories","dispatchStories","setUrl","handleFetchStories","useCallback","Axios","then","result","hits","catch","e","preventDefault","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ceac20f9.chunk.js","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M113.636,272.638c-2.689,0-5.267-1.067-7.168-2.97L2.967,166.123c-3.956-3.957-3.956-10.371-0.001-14.329l54.673-54.703       c1.9-1.9,4.479-2.97,7.167-2.97c2.689,0,5.268,1.068,7.169,2.969l41.661,41.676L225.023,27.332c1.9-1.901,4.48-2.97,7.168-2.97l0,0       c2.688,0,5.268,1.068,7.167,2.97l54.675,54.701c3.956,3.957,3.956,10.372,0,14.328L120.803,269.668       C118.903,271.57,116.325,272.638,113.636,272.638z M24.463,158.958l89.173,89.209l158.9-158.97l-40.346-40.364L120.803,160.264       c-1.9,1.902-4.478,2.971-7.167,2.971c-2.688,0-5.267-1.068-7.168-2.97l-41.66-41.674L24.463,158.958z\"\n}));\n\nvar SvgCheck = function SvgCheck(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 297 297\",\n    style: {\n      enableBackground: \"new 0 0 297 297\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgCheck, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/check.4ca94fa5.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react'\nimport { ReactComponent as Check } from './check.svg'\n\nfunction List({\n  list,\n  loading,\n  handleButtonClick\n}) {\n  console.log('List')\n  return (\n    <div>\n      {\n        loading ?\n          <div>Loading</div> :\n          list.map(item => (\n            <div key={item.objectID} className=\"item\">\n              <span style={{ width: '40%' }}>\n                <a href={item.url}>{item.title}</a>\n              </span>\n              <span style={{ width: '30%' }}>{item.author}</span>\n              <span style={{ width: '10%' }}>{item.num_comments}</span>\n              <span style={{ width: '10%' }}>{item.points}</span>\n              <span style={{ width: '10%' }}>\n                <button\n                  type=\"button\"\n                  onClick={() => handleButtonClick(item)}\n                  className=\"button button_small\"\n                >\n                  <Check height=\"18px\" width=\"18px\" />\n                </button>\n              </span>\n            </div>\n          ))\n      }\n    </div>\n  )\n}\n\nexport default React.memo(List)","import React, { useEffect } from 'react'\n\nfunction Search({\n  handleInputChange,\n  value,\n  children,\n  handleSearchClick\n}) {\n  console.log('Search')\n  const inputRef = React.useRef()\n  /**\n   * 一个重要的理解就是在加载一个组件的时候，整个函数都是重新执行的，一些use方法\n   * 提供了变化中不变化的方法\n   */\n  useEffect(() => {\n    inputRef.current.focus()\n  }, [inputRef])\n\n\n  return (\n    <>\n      <form onSubmit={handleSearchClick} className=\"search-form\">\n        <label className=\"label\" htmlFor=\"search\" >{children}</label>\n        <input\n          ref={inputRef}\n          type=\"text\"\n          id=\"search\"\n          onChange={handleInputChange}\n          value={value}\n          className=\"input\"\n        />\n        <button type=\"submit\" className=\"button button_large\">Click Me</button>\n      </form>\n    </>\n  )\n}\n\nexport default Search","import React, { useReducer, useState, useEffect, useCallback, useRef } from 'react';\nimport './App.css'\nimport List from './List'\nimport Search from './Search'\nimport Axios from 'axios';\nconst API_ENDPOINT = 'https://hn.algolia.com/api/v1/search?query=';\n\n/**\n * 第一次便是获取上一次的值,没必要进行保存\n */\nconst useCustomHook = () => {\n\n  const isMounted = useRef(false)\n\n  const [searchValue, setSearchValue] = useState(\n    localStorage.getItem('search') || ''\n  )\n\n  useEffect(() => {\n    if (isMounted.current === false) {\n      isMounted.current = true\n    } else {\n      localStorage.setItem('search', searchValue)\n    }\n  }, [searchValue])\n\n  return [searchValue, setSearchValue]\n}\n/**\n * loading error都是和list的获取相关的\n * 因此状态管理都放在一起更好管理\n * state ={\n *  list,\n *  loading,\n *  error\n * }\n */\n\nconst storiesReducer = (state, action) => {\n  console.log(action.type)\n  switch (action.type) {\n    case 'STORIES_FETCH_INIT':\n      return {\n        ...state,\n        isLoading: true,\n        isError: false,\n      };\n    case 'STORIES_FETCH_SUCCESS':\n      return {\n        ...state,\n        isLoading: false,\n        isError: false,\n        data: action.payload,\n      };\n    case 'STORIES_FETCH_FAILURE':\n      return {\n        ...state,\n        isLoading: false,\n        isError: true,\n      };\n    case 'REMOVE_STORY':\n      return {\n        ...state,\n        data: state.data.filter(\n          story => action.payload.objectID !== story.objectID\n        ),\n      };\n    default:\n      throw new Error();\n  }\n}\n\nfunction App() {\n  console.log('APP')\n  const isFirst = useRef(true)\n\n  const [searchValue, setSearchValue] = useCustomHook()\n\n  const [stories, dispatchStories] = useReducer(\n    storiesReducer,\n    { data: [], isLoading: false, isError: false }\n  );\n  const [url, setUrl] = useState(`${API_ENDPOINT + searchValue}`)\n\n  const { isLoading, data, isError } = stories\n\n  const handleFetchStories = useCallback(() => {\n    if (isFirst.current) {\n      dispatchStories({ type: 'STORIES_FETCH_INIT' });\n      isFirst.current = false\n    }\n\n    Axios(url)\n      .then(result => {\n        dispatchStories({\n          type: 'STORIES_FETCH_SUCCESS',\n          payload: result.data.hits,\n        });\n      })\n      .catch(() =>\n        dispatchStories({ type: 'STORIES_FETCH_FAILURE' })\n      );\n  }, [url])\n\n  useEffect(() => {\n    handleFetchStories()\n  }, [handleFetchStories]);\n\n  const handleInputChange = e => {\n    setSearchValue(e.target.value)\n  }\n\n  /**\n   * 传入List组件的props在仅仅输入input内容的时候就不需要进行全部渲染了\n   */\n  const handleButtonClick = useCallback(item => {\n    dispatchStories({\n      type: 'REMOVE_STORY',\n      payload: item,\n    });\n  }, [])\n  const handleSearchClick = e => {\n    setUrl(API_ENDPOINT + searchValue)\n    e.preventDefault()\n  }\n\n  return (\n    <div className=\"container\">\n      <h1 className=\"headline-primary\">My Hacker Stories</h1>\n      <Search\n        handleInputChange={handleInputChange}\n        value={searchValue}\n        handleSearchClick={handleSearchClick}\n      >\n        <strong>Search: </strong>\n      </Search>\n      {\n        isError ?\n          <strong>Error</strong> :\n          <List\n            loading={isLoading}\n            list={data}\n            handleButtonClick={handleButtonClick}\n          />\n      }\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css'\nimport App from './App';\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}